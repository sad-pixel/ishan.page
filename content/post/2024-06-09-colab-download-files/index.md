---
title: "Why FileLinks Didn't Work in Google Colab" 
slug: colab-download-files 
description: and How Buttons Saved the Day 
date: 2024-06-09
tags: ["google-colab", "filelinks", "python", "colab", "programming", "jupyter"]
---

If you've ever worked on a project in Google Colab and tried to provide download links for files using `FileLink`, you might have encountered some issues. Specifically, you might have noticed that the links often point to `localhost:8080`, making them useless for actual downloads. This can be frustrating, especially when you just want a simple way for users to download files generated by your notebook.

So, why does this happen, and what can you do about it?

#### The Problem with `FileLink` in Google Colab

`FileLink` is a handy feature in Jupyter Notebooks that creates a hyperlink to a file stored in your notebook's environment. However, Google Colab runs your notebooks on remote servers, not on your local machine. When you use `FileLink` in Colab, the generated link points to `localhost:8080`, which is your local machine's loopback address. This doesn't make sense in a remote server context because your local machine has no idea where the Colab server is.

In simpler terms, `FileLink` is trying to give you a shortcut to a place it can't actually reach. This results in broken links that won't help you or your users download the files they need.

Here's an example of code that doesn't work well in Google Colab:

```python
import pandas as pd
from IPython.display import FileLink

# Sample DataFrame to save as CSV
df = pd.DataFrame({'Column1': [1, 2, 3], 'Column2': ['A', 'B', 'C']})
result_file_path = 'sample_results.csv'
df.to_csv(result_file_path, index=False)

# Creating a FileLink
display(FileLink(result_file_path))
```

When you run this code in Google Colab, the link it generates points to `localhost:8080`, which is not accessible from the Colab environment, making it impossible to download the file.

#### The Button-Based Solution

Instead of relying on `FileLink`, which doesn't work well in Google Colab, we can use buttons that trigger file downloads. Google Colab has built-in support for this through the `google.colab` library, making it easy to create buttons for downloading files.

To implement this, you can use widgets from `ipywidgets` to create buttons and attach functions to handle the downloads. Here's a simple way to do it:

```python
import pandas as pd
import ipywidgets as widgets
from IPython.display import display
from google.colab import files

# Sample DataFrame to save as CSV
df = pd.DataFrame({'Column1': [1, 2, 3], 'Column2': ['A', 'B', 'C']})
result_file_path = 'sample_results.csv'
df.to_csv(result_file_path, index=False)

# Function to display download buttons
def display_download_buttons(result_file_path):
    result_button = widgets.Button(description='Download Results')
    
    def download_result_file(b):
        files.download(result_file_path)
    
    result_button.on_click(download_result_file)
    display(result_button)

# Call the function to display the download button
display_download_buttons(result_file_path)
```

This code snippet demonstrates how to create a simple button that allows users to download a CSV file generated in the notebook.

If you're working in Google Colab and need a reliable way for users to download files, avoid `FileLink` and go for a button-based solution with `colab.files`. This not only solves the problem of broken links but also enhances the user experience by providing a straightforward and effective way to download files. Happy coding!